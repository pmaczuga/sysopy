<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1250">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Segoe UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:inherit;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:0cm;
	line-height:107%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:18.0pt;
	font-family:"Times New Roman",serif;
	font-weight:bold;}
p
	{margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
pre
	{mso-style-link:"HTML Preformatted Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Courier New";}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Times New Roman",serif;
	font-weight:bold;}
span.HTMLPreformattedChar
	{mso-style-name:"HTML Preformatted Char";
	mso-style-link:"HTML Preformatted";
	font-family:"Courier New";}
.MsoChpDefault
	{font-family:"Calibri",sans-serif;}
.MsoPapDefault
	{margin-bottom:8.0pt;
	line-height:107%;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:70.85pt 70.85pt 70.85pt 70.85pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=EN-US>

<div class=WordSection1>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:18.0pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>W¹tki
- materia³y pomocnicze</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:18.0pt;font-family:"inherit",serif;color:#373A3C'>Informacje
wstêpne</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>W
obrêbie jednego procesu mo¿e istnieæ wiele w¹tków, które dzia³aj¹ w obrêbie
jednej przestrzeni adresowej i s¹ wykonywane wspó³bie¿nie. Proces koñczy swoje
dzia³anie, gdy zakoñcz¹ swoje dzia³anie wszystkie w¹tki (uwaga - zwrócenie
wartoœci z funkcji&nbsp;</span><span style='font-size:11.5pt;font-family:"Courier New";
color:#373A3C'>main</span><span style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;
color:#373A3C'>&nbsp;koñczy dzia³anie wszystkich w¹tków). W¹tki s¹
identyfikowane za pomoc¹ ID typu&nbsp;</span><span style='font-size:11.5pt;
font-family:"Courier New";color:#373A3C'>pthread_t</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>.
Ka¿dy w¹tek posiada w³asny odrêbny stos.</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>W¹tki
wspó³dziel¹:</span></p>

<ul type=disc>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>przestrzeñ
     adresow¹ (w szczególnoœci zmienne globalne)</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>identyfikatory
     zwi¹zane z procesem (PID, UID, PPID, ...)</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>deskryptory
     plików</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>sposób obs³ugi
     sygna³ów (signal dispositioin - ignorowanie/obs³uga domyœlna/handler)</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>limity i
     liczniki zu¿ycia zasobów</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>inne: rygle na
     pliki, umask, katalog g³ówny/bie¿¹cy, wartoœæ nice</span></li>
</ul>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Ka¿dy
w¹tek posiada w³asne:</span></p>

<ul type=disc>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>thread ID (TID)</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><b><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>maska</span></b><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;sygna³ów</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>wartoœæ errno</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>dane w³asne
     (thread local)</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>stos (w
     szczególnoœci zmienne lokalne)</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>inne: polityki
     szeregowania, CPU affinity, security capabilities, alternate signal stack</span></li>
</ul>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Do
obs³ugi w¹tków w standardzie POSIX s³u¿y biblioteka pthreads. Aby jej u¿ywaæ,
nale¿y do³¹czyæ plik nag³ówkowy pthreads.h oraz dolinkowaæ bibliotekê pthread (</span><span
style='font-size:11.5pt;font-family:"Courier New";color:#373A3C'>-lpthread</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>)</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:18.0pt;font-family:"inherit",serif;color:#373A3C'>Tworzenie
w¹tków</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Do
tworzenia nowych w¹tków s³u¿y funkcja pthread_create</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;background:white'><span style='font-size:10.0pt;font-family:"Courier New";
color:#212529'>int pthread_create(pthread_t *thread, const pthread_attr_t
*attr,&nbsp;void *(*start_routine) (void *), void *arg)</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>gdzie</span></p>

<ul type=disc>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Courier New"'>thread</span><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;-
     wskaŸnik na miejsce gdzie zapisany zostanie identyfikator utworzonego
     w¹tku</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Courier New"'>attr</span><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;-
     dodatkowe ustawienia (opcjonalne,&nbsp;</span><span style='font-size:11.5pt;
     font-family:"Courier New"'>NULL</span><span style='font-size:11.5pt;
     font-family:"Segoe UI",sans-serif'>&nbsp;= ustawienia domyœlne)</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Courier New"'>start_routine</span><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;- adres
     funkcji, która ma zostaæ wykonana w utworzonym w¹tku</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Courier New"'>arg</span><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;-
     argument, z którym ma zostaæ wywo³ana</span></li>
</ul>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Funkcja
na któr¹ wskazuje&nbsp;</span><span style='font-size:11.5pt;font-family:"Courier New";
color:#373A3C'>start_routine</span><span style='font-size:11.5pt;font-family:
"Segoe UI",sans-serif;color:#373A3C'>&nbsp;przyjmuje i zwraca wskaŸnik na
dowolne dane (</span><span style='font-size:11.5pt;font-family:"Courier New";
color:#373A3C'>void*</span><span style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;
color:#373A3C'>). Nie ma gwarancji, ¿e nowo utworzony w¹tek zacznie swoje dzia³anie
natychmiast - nie nale¿y zatem przekazywaæ jako&nbsp;</span><span
style='font-size:11.5pt;font-family:"Courier New";color:#373A3C'>arg</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>&nbsp;adresów
zmiennych lokalnych które mog¹ ulec zniszczeniu zanim nowy w¹tek zacznie
dzia³aæ.</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Typ
identyfikatora w¹tku&nbsp;</span><span style='font-size:11.5pt;font-family:
"Courier New";color:#373A3C'>pthread_t</span><span style='font-size:11.5pt;
font-family:"Segoe UI",sans-serif;color:#373A3C'>&nbsp;jest zale¿ny od
implementacji - mo¿e nie byæ to typ ca³kowitoliczbowy. Do porównywania równoœci
dwóch wartoœci typu&nbsp;</span><span style='font-size:11.5pt;font-family:"Courier New";
color:#373A3C'>pthread_t</span><span style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;
color:#373A3C'>&nbsp;s³u¿y funkcja&nbsp;</span><span style='font-size:11.5pt;
font-family:"Courier New";color:#373A3C'>pthread_equal</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>:</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;background:white'><span style='font-size:10.0pt;font-family:"Courier New";
color:#212529'>int pthread_equal(pthread_t tid1, pthread_t tid2);</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>zwracaj¹ca
0 jeœli&nbsp;</span><span style='font-size:11.5pt;font-family:"Courier New";
color:#373A3C'>tid1</span><span style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;
color:#373A3C'>&nbsp;nie jest równy&nbsp;</span><span style='font-size:11.5pt;
font-family:"Courier New";color:#373A3C'>tid2</span><span style='font-size:
11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>. Swój w³asny
identyfikator w¹tek mo¿e pobraæ przy u¿yciu&nbsp;</span><span style='font-size:
11.5pt;font-family:"Courier New";color:#373A3C'>pthread_self</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>:</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;background:white'><span style='font-size:10.0pt;font-family:"Courier New";
color:#212529'>pthread_t pthread_self(void);</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Argument
attr pozwala kontrolowaæ ró¿ne aspekty dzia³ania tworzonego w¹tku. Przed
przekazaniem adresu struktury pthread_attr_t nale¿y j¹ zainicjalizowaæ przy
u¿yciu funkcji&nbsp;</span><span style='font-size:11.5pt;font-family:"Courier New";
color:#373A3C'>pthread_attr_init:</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;background:white'><span style='font-size:10.0pt;font-family:"Courier New";
color:#212529'>int pthread_attr_init(pthread_attr_t *attr);</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Po
wywo³aniu pthread_create nale¿y zwolniæ potencjalnie zaalokowane przez to
wywo³anie zasoby u¿ywaj¹c funkcji&nbsp;</span><span style='font-size:11.5pt;
font-family:"Courier New";color:#373A3C'>pthread_attr_destroy</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>:</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;background:white'><span style='font-size:10.0pt;font-family:"Courier New";
color:#212529'>int pthread_attr_destroy(pthread_attr_t *attr);</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:18.0pt;font-family:"inherit",serif;color:#373A3C'>Cykl ¿ycia
w¹tku</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Dzia³anie
w¹tku mo¿e zostaæ zakoñczone w wyniku kilku zdarzeñ:</span></p>

<ul type=disc>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>jeœli w¹tek
     g³ówny zakoñczy swoje dzia³anie poprzez zwrócenie wartoœci z funkcji main,
     ca³y proces (wszystkie jego w¹tki) koñczy swoje dzia³anie</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>jeœli
     którykolwiek w¹tek procesu wywo³a&nbsp;</span><span style='font-size:11.5pt;
     font-family:"Courier New"'>exit</span><span style='font-size:11.5pt;
     font-family:"Segoe UI",sans-serif'>,&nbsp;</span><span style='font-size:
     11.5pt;font-family:"Courier New"'>_Exit</span><span style='font-size:11.5pt;
     font-family:"Segoe UI",sans-serif'>&nbsp;lub&nbsp;</span><span
     style='font-size:11.5pt;font-family:"Courier New"'>_exit</span><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>, ca³y proces
     koñczy swoje dzia³anie</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>jeœli
     którykolwiek w¹tek otrzyma sygna³, którego domyœlnym sposobem obs³ugi jest
     zakoñczenie procesu, ca³y proces koñczy swoje dzia³anie</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>jeœli w¹tek
     zwróci wartoœæ ze swojej funkcji, koñczy on swoje dzia³anie</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>jeœli w¹tek
     wywo³a&nbsp;</span><span style='font-size:11.5pt;font-family:"Courier New"'>pthread_exit</span><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>, koñczy on
     swoje dzia³anie</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>jeœli w¹tek
     zostanie anulowany przez inny w¹tek, koñczy on swoje dzia³anie</span></li>
</ul>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Funkcja</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;background:white'><span style='font-size:10.0pt;font-family:"Courier New";
color:#212529'>void pthread_exit(void *rval_ptr);</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>przyjmuje
wartoœæ która zostanie u¿yta jako wartoœæ zwrócona przez w¹tek. Zwrócenie
wartoœci&nbsp;</span><span style='font-size:11.5pt;font-family:"Courier New";
color:#373A3C'>val</span><span style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;
color:#373A3C'>&nbsp;z funkcji w¹tku jest równowa¿ne z wywo³aniem&nbsp;</span><span
style='font-size:11.5pt;font-family:"Courier New";color:#373A3C'>pthread_exit(val)</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>&nbsp;(poza
w¹tkiem g³ównym - w nim zwrócenie&nbsp;</span><span style='font-size:11.5pt;
font-family:"Courier New";color:#373A3C'>val</span><span style='font-size:11.5pt;
font-family:"Segoe UI",sans-serif;color:#373A3C'>&nbsp;jest równowa¿ne z</span><span
style='font-size:11.5pt;font-family:"Courier New";color:#373A3C'>exit(val)</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>).
Wywo³anie&nbsp;</span><span style='font-size:11.5pt;font-family:"Courier New";
color:#373A3C'>pthread_exit</span><span style='font-size:11.5pt;font-family:
"Segoe UI",sans-serif;color:#373A3C'>&nbsp;z w¹tku g³ównego powoduje
zakoñczenie w¹tku g³ównego, ale pozosta³e w¹tki nadal mog¹ dzia³aæ - ca³y
proces zakoñczy siê wówczas dopiero gdy zakoñcz¹ swoje dzia³anie wszystkie
utworzone w¹tki, a kodem wyjœcia procesu bêdzie 0.</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Przerwaæ
dzia³anie w¹tku z innego w¹tku mo¿na przy pomocy funkcji&nbsp;</span><span
style='font-size:11.5pt;font-family:"Courier New";color:#373A3C'>pthread_cancel</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>:</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;background:white'><span style='font-size:10.0pt;font-family:"Courier New";
color:#212529'>int pthread_cancel(pthread_t tid);</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Reakcja
w¹tku na bycie anulowanym zale¿y od jego ustawieñ. W¹tek mo¿e dopuszczaæ
(zachowanie domyœlne) lub odrzucaæ ¿¹dania anulowania, sterowaæ tym zachowaniem
mo¿na przy u¿yciu funkcji&nbsp;pthread_setcancelstate</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;background:white'><span style='font-size:10.0pt;font-family:"Courier New";
color:#212529'>int pthread_setcancelstate(int state, int *oldstate);</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>podaj¹c
jako pierwszy argument&nbsp;</span><span style='font-size:11.5pt;font-family:
"Courier New";color:#373A3C'>PTHREAD_CANCEL_ENABLE</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>&nbsp;lub&nbsp;</span><span
style='font-size:11.5pt;font-family:"Courier New";color:#373A3C'>PTHREAD_CANCEL_DISABLE</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>.
Anulowanie w¹tku z zablokowanym anulowaniem powoduje, ¿e w¹tek zostanie
anulowany w chwili gdy z powrotem odblokuje mo¿liwoœæ anulowania. Jeœli w¹tek
dopuszcza anulowanie, mo¿e to robiæ w dwóch trybach:</span></p>

<ul type=disc>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Courier New"'>PTHREAD_CANCEL_DEFERRED</span><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;(domyœlnie)
     - w¹tek kontynuuje swoje dzia³anie do momentu napotkania tzw.&nbsp;<i>cancellation
     point</i></span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Courier New"'>PTHREAD_CANCEL_ASYNCHRONOUS</span><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;- w¹tek
     koñczy swoje dzia³anie natychmiast</span></li>
</ul>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Zmieniæ
tryb anulowania mo¿na przy pomocy funkcji&nbsp;</span><span style='font-size:
11.5pt;font-family:"Courier New";color:#373A3C'>pthread_setcanceltype</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>:</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;background:white'><span style='font-size:10.0pt;font-family:"Courier New";
color:#212529'>int pthread_setcanceltype(int type, int *oldtype);</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Cancellation
point to wywo³anie jednej z wymienionej jako takowy przez standard POSIX
funkcji (np.&nbsp;</span><span style='font-size:11.5pt;font-family:"Courier New";
color:#373A3C'>read</span><span style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;
color:#373A3C'>,&nbsp;</span><span style='font-size:11.5pt;font-family:"Courier New";
color:#373A3C'>write</span><span style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;
color:#373A3C'>,&nbsp;</span><span style='font-size:11.5pt;font-family:"Courier New";
color:#373A3C'>pause</span><span style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;
color:#373A3C'>). W szczególnoœci cancellation point stanowi wywo³anie
funkcji&nbsp;</span><span style='font-size:11.5pt;font-family:"Courier New";
color:#373A3C'>pthread_testcancel</span><span style='font-size:11.5pt;
font-family:"Segoe UI",sans-serif;color:#373A3C'>.</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Domyœlnie
po zakoñczeniu dzia³ania w¹tku wartoœæ któr¹ zwróci³ mo¿na pobraæ przy u¿yciu
funkcji&nbsp;</span><span style='font-size:11.5pt;font-family:"Courier New";
color:#373A3C'>pthread_join</span><span style='font-size:11.5pt;font-family:
"Segoe UI",sans-serif;color:#373A3C'>:</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;background:white'><span style='font-size:10.0pt;font-family:"Courier New";
color:#212529'>int pthread_join(pthread_t thread, void **rval_ptr);</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Jeœli
w¹tek zosta³ anulowany, pod&nbsp;</span><span style='font-size:11.5pt;
font-family:"Courier New";color:#373A3C'>rval_ptr</span><span style='font-size:
11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>&nbsp;zapisana zostanie
wartoœæ&nbsp;</span><span style='font-size:11.5pt;font-family:"Courier New";
color:#373A3C'>PTHREAD_CANCELED</span><span style='font-size:11.5pt;font-family:
"Segoe UI",sans-serif;color:#373A3C'>. Jeœli chcemy, by dane zakoñczonego w¹tku
nie by³y przechowywane do czasu wywo³ania pthread_join, a by³y usuwane
natychmiast, mo¿emy w¹tek uczyniæ w¹tkiem od³¹czonym. Mo¿na to uczyniæ na dwa
sposoby: w momencie tworzenia w¹tku, lub póŸniej.</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Aby
utworzyæ w¹tek od razu jako w¹tek od³¹czony, nale¿y do&nbsp;</span><span
style='font-size:11.5pt;font-family:"Courier New";color:#373A3C'>pthread_create</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>&nbsp;przekazaæ
adres struktury&nbsp;</span><span style='font-size:11.5pt;font-family:"Courier New";
color:#373A3C'>pthread_attr_t</span><span style='font-size:11.5pt;font-family:
"Segoe UI",sans-serif;color:#373A3C'>&nbsp;po wywo³aniu na niej&nbsp;</span><span
style='font-size:11.5pt;font-family:"Courier New";color:#373A3C'>pthread_attr_setdetachstate</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;background:white'><span style='font-size:10.0pt;font-family:"Courier New";
color:#212529'>int pthread_attr_setdetachstate(pthread_attr_t *attr, int
detachstate);</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>jako
drugi argument przekazuj¹c&nbsp;</span><span style='font-size:11.5pt;
font-family:"Courier New";color:#373A3C'>PTHREAD_CREATE_DETACHED</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>.</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Istniej¹cy
w¹tek mo¿na po utworzeniu od³¹czyæ przy u¿yciu funkcji&nbsp;</span><span
style='font-size:11.5pt;font-family:"Courier New";color:#373A3C'>pthread_detach</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>:</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;background:white'><span style='font-size:10.0pt;font-family:"Courier New";
color:#212529'>int pthread_detach(pthread_t tid);</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:18.0pt;font-family:"inherit",serif;color:#373A3C'>W¹tki i
sygna³y</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Sygna³y
s¹ dostarczane do jednego w¹tku w procesie. Sygna³y zwi¹zane ze zdarzeniami
sprzêtowymi s¹ z regu³y dostarczane do w¹tku, który je spowodowa³, pozosta³e -
arbitralnie.</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>W¹tki
maj¹ odrêbne maski sygna³ów, ale wspólne ustawienia ich obs³ugi (signal
disposition). Do ustawienia maski sygna³u w¹tku s³u¿y funkcja&nbsp;</span><span
style='font-size:11.5pt;font-family:"Courier New";color:#373A3C'>pthread_sigmask:</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;background:white'><span style='font-size:10.0pt;font-family:"Courier New";
color:#212529'>int pthread_sigmask(int how, const sigset_t* set,&nbsp;sigset_t*
oset);</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>o
sygnaturze identycznej do&nbsp;</span><span style='font-size:11.5pt;font-family:
"Courier New";color:#373A3C'>sigprocmask</span><span style='font-size:11.5pt;
font-family:"Segoe UI",sans-serif;color:#373A3C'>. Dzia³anie&nbsp;</span><span
style='font-size:11.5pt;font-family:"Courier New";color:#373A3C'>sigprocmask</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>&nbsp;dla
programu wielow¹tkowego jest niezdefiniowane.</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Aby
wys³aæ sygna³ do konkretnego w¹tku, nale¿y u¿yæ funkcji&nbsp;</span><span
style='font-size:11.5pt;font-family:"Courier New";color:#373A3C'>pthread_kill</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>&nbsp;lub&nbsp;</span><span
style='font-size:11.5pt;font-family:"Courier New";color:#373A3C'>pthread_sigqueue</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>:&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;background:white'><span style='font-size:10.0pt;font-family:"Courier New";
color:#212529'>int pthread_kill(pthread_t thread, int signo);</span><span
style='font-size:10.0pt;font-family:Consolas;color:#212529'><br>
</span><span style='font-size:10.0pt;font-family:"Courier New";color:#212529'>int
pthread_sigqueue(pthread_t thread, int sig, const union sigval value);</span></p>

<p class=MsoNormal><span lang=PL>&nbsp;</span></p>

</div>

</body>

</html>

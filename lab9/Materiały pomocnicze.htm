<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1250">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
@font-face
	{font-family:"Segoe UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:MathJax_Size1;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:inherit;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:0cm;
	line-height:107%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:18.0pt;
	font-family:"Times New Roman",serif;
	font-weight:bold;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:13.5pt;
	font-family:"Times New Roman",serif;
	font-weight:bold;}
h4
	{mso-style-link:"Heading 4 Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:#954F72;
	text-decoration:underline;}
p
	{margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
pre
	{mso-style-link:"HTML Preformatted Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Courier New";}
tt
	{font-family:"Courier New";}
span.MsoPlaceholderText
	{color:gray;}
span.mo
	{mso-style-name:mo;}
span.mi
	{mso-style-name:mi;}
span.mn
	{mso-style-name:mn;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Times New Roman",serif;
	font-weight:bold;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Times New Roman",serif;
	font-weight:bold;}
span.Heading4Char
	{mso-style-name:"Heading 4 Char";
	mso-style-link:"Heading 4";
	font-family:"Times New Roman",serif;
	font-weight:bold;}
span.code
	{mso-style-name:code;}
p.note, li.note, div.note
	{mso-style-name:note;
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
p.codetitle, li.codetitle, div.codetitle
	{mso-style-name:codetitle;
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
span.HTMLPreformattedChar
	{mso-style-name:"HTML Preformatted Char";
	mso-style-link:"HTML Preformatted";
	font-family:"Courier New";}
span.comment
	{mso-style-name:comment;}
span.input
	{mso-style-name:input;}
span.mw-headline
	{mso-style-name:mw-headline;}
.MsoChpDefault
	{font-family:"Calibri",sans-serif;}
.MsoPapDefault
	{margin-bottom:8.0pt;
	line-height:107%;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:70.85pt 70.85pt 70.85pt 70.85pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink="#954F72">

<div class=WordSection1>

<h2 style='margin-top:0cm;background:white'><span lang=PL style='font-size:
13.0pt;font-family:"MathJax_Size1",serif;color:#373A3C;background:white'><br>
</span><span lang=PL style='font-family:"Segoe UI",sans-serif;color:#373A3C;
font-weight:normal'>Metody synchronizacji w¹tków - materia³y pomocnicze</span></h2>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:18.0pt;font-family:"inherit",serif;color:#373A3C'>Mutex-y</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><b><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'><a
href="https://pl.wikipedia.org/wiki/Mutex" title="w:Mutex"><span lang=PL
style='color:#009C58'>Mutex</span></a></span></b><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>&nbsp;(<b><i>MUT</i></b><i>ual&nbsp;<b>EX</b>clusion</i>,
wzajemne wykluczanie) jest blokad¹, któr¹ mo¿e uzyskaæ&nbsp;<b>tylko jeden
w¹tek</b>. Mutexy s³u¿¹ g³ównie do realizacji sekcji krytycznych, czyli
bezpiecznego w sensie wielow¹tkowym dostêpu do zasobów wspó³dzielonych.</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Schemat
dzia³ania na mutexach jest nastêpuj¹cy:</span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>pozyskanie
     blokady</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>modyfikacja lub
     odczyt wspó³dzielonego obiektu</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>zwolnienie
     blokady</span></li>
</ol>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Mutex
w&nbsp;<b>pthreads</b>&nbsp;jest opisywany przez strukturê typu&nbsp;</span><span
lang=PL style='font-size:10.0pt;font-family:"Courier New";color:#373A3C'>pthread_mutex_t</span><span
lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>,
zaœ jego atrybuty&nbsp;</span><span lang=PL style='font-size:10.0pt;font-family:
"Courier New";color:#373A3C'>pthread_mutexattr_t</span><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>.</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Obiekt&nbsp;pthread_mutex_t&nbsp;(wzajemnego
wykluczania) musi byæ przed u¿yciem zainicjalizowany, co odbywa siê za pomoc¹
funkcji&nbsp;</span><span style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;
color:#373A3C'><a
href="http://www.linuxmanpages.com/man3/pthread_mutex_init.3thr.php"><span
lang=PL style='color:#009C58'>pthread_mutex_init</span></a></span><span
lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;background:white'><b><span style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;
color:#373A3C'>int</span></b><span style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;
color:#373A3C'>&nbsp;pthread_mutex_init (<b>pthread_mutex_t</b>&nbsp;*mutex,&nbsp;<b>pthread_mutexattr_t</b>&nbsp;*attr);</span></p>

<ul type=disc>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>mutex -
     wczeœniej stworzony przez nas mutex</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>attr -
     atrybuty tworzonego mutexu (domyœlne ustawienia: NULL)</span></li>
</ul>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Zablokowanie
obiektu przez w¹tek mo¿e zostaæ wykonane poprzez jedn¹ z nastêpuj¹cych funkcji:</span></p>

<ul type=disc>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><b><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>int</span></b><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;pthread_mutex_lock(<b>pthread_mutex_t</b>&nbsp;*mutex)
     - która jeœli obiektu mutex-a jest zablokowany przez inny w¹tek usypia
     obecny w¹tek, a¿ mutex zostanie odblokowany. Z kolei jeœli obiekt mutex-a
     jest ju¿ zablokowany przez przez obecny w¹tek to albo:</span></li>
 <ul type=circle>
  <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
      lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>usypia
      wywo³uj¹cy j¹ w¹tek (jeœli jest to mutex typu &quot;fast&quot;)</span></li>
  <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
      lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>zwraca
      natychmiast kod b³êdu&nbsp;EDEADLK&nbsp;(jeœli jest to mutex typu
      &quot;error checking&quot;)</span></li>
  <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
      lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>normalnie
      kontynuuje prace, zwiêkszaj¹c licznik blokad mutex-a przez dany w¹tek
      (jeœli mutex jest typu &quot;recursive&quot;); odpowiednia liczba razy
      odblokowañ musi nast¹piæ aby mutex powróci³ do stanu &quot;unlocked&quot;</span></li>
 </ul>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><b><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>int</span></b><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;pthread_mutex_trylock(<b>pthread_mutex_t</b>&nbsp;*mutex)&nbsp;-
     która zachowuje siê podobnie jak powy¿sza, z tym ¿e obecny w¹tek nie jest
     blokowany jeœli mutex jest ju¿ zablokowany przez inny w¹tek,a jedynie ustawia
     flagê EBUSY.</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'><a
     href="http://www.opengroup.org/onlinepubs/009695399/functions/pthread_mutex_timedlock.html"><span
     lang=PL style='color:#009C58'>pthread_mutex_timedlock&nbsp;</span></a></span><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>- jest
     rozwiniêciem funkcji&nbsp;pthread_mutex_lock&nbsp;- podawany jest
     maksymalny czas czekania w¹tku na odblokowanie (zablokowanego przez inny
     w¹tek) mutex-a.</span></li>
</ul>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Odblokowanie
mutex-a wykonywane jest za pomoc¹ funkcji&nbsp;</span><span style='font-size:
11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'><a
href="http://www.linuxmanpages.com/man3/pthread_mutex_unlock.3thr.php"><span
lang=PL style='color:#009C58'>pthread_mutex_unlock</span></a></span><span
lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>.</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=869
 style='width:651.75pt;border-collapse:collapse'>
 <tr>
  <td style='background:#FFBBBB;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=PL
  style='font-size:12.0pt;font-family:"Times New Roman",serif'>Ostrze¿enie:&nbsp;</span></b><span
  lang=PL style='font-size:12.0pt;font-family:"Times New Roman",serif'>Nale¿y
  zwróciæ uwagê, aby nie u¿ywaæ mutex-ów w funkcjach obs³uguj¹cych sygna³y
  (signal handlers), gdy¿ mo¿e to doprowadziæ do zablokowania siê programu.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Jednym
z najprostszych zastosowañ mutex-ów jest ochrona zmiennej przed równoczesnym
dostêpem z wielu w¹tków. </span><span style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;
color:#373A3C'>Pokazuje to nastêpuj¹cy przyk³ad:</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=869
 style='width:651.75pt;border-collapse:collapse'>
 <tr>
  <td style='background:#7A5ADA;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal style='line-height:normal'><span style='font-size:12.0pt;
  font-family:"Times New Roman",serif'>Chronienie dostêpu do zmiennej</span></p>
  </td>
 </tr>
 <tr>
  <td style='background:#DDDDFF;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>int
  x;</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>pthread_mutex_t
  x_mutex = PTHREAD_MUTEX_INITIALIZER;</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>&nbsp;</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>void
  my_thread_safe_function(...) </span><span lang=PL style='font-size:10.0pt;
  font-family:Consolas;color:#212529'>{</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=PL style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>  /* Ka¿dy dostêp do zmiennej x powinien siê odbywaæ w
  nastêpuj¹cy sposób: */</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=PL style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>  </span><span style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>pthread_mutex_lock(&amp;x_mutex);</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>  /*
  operacje na x... */</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'> 
  pthread_mutex_unlock(&amp;x_mutex);</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>}</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>&nbsp;</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>...</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:13.5pt;font-family:"inherit",serif;color:#373A3C'>Zakleszczenia</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Zakleszczenia
s¹ najczêœciej spowodowane nieprawid³owym u¿ywaniem mechanizmu mutexów przez
programistê. Mo¿e to wyst¹piæ np. w sytuacji gdy próbujemy zamkn¹æ mutex w
w¹tku, w którym ju¿ wczeœniej to zrobiliœmy. Zachowanie programu jest wtedy
uzale¿nione od typu u¿ywanego mutexu.</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:0cm;margin-bottom:0cm;
margin-left:36.0pt;margin-bottom:.0001pt;line-height:normal;background:white'><span
lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Wyró¿niamy
trzy rodzaje mutexów:</span></p>

<ul type=disc>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><b><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>Szybki
     mutex</span></b><span lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;(fast
     mutex) – domyœlny typ, próba zamkniêcia takiego mutexu z w¹tku, w którym
     wczeœniej ju¿ to zrobiliœmy spowoduje zakleszczenie.</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><b><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>Rekursywny
     mutex</span></b><span lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;–
     nie powoduje zakleszczenia. Zapamiêtuje ile razy w¹tek zablokowa³ danego
     mutexa i oczekuje na tak¹ sam¹ iloœæ odblokowañ.</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><b><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>Mutex
     sprawdzaj¹cy b³êdy</span></b><span lang=PL style='font-size:11.5pt;
     font-family:"Segoe UI",sans-serif'>&nbsp;(error-checking mutex) – taka
     próba spowoduje b³¹d&nbsp;<b>EDEADLK</b>&nbsp;podczas wywo³ywania
     pthread_mutex_lock</span></li>
</ul>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>By
stworzyæ niestandardowe mutexy u¿ywamy nastêpuj¹cych typów i funkcji:&nbsp;<b>int</b>&nbsp;pthread_mutexattr_init(
*attr) - inicjalizuje zmienn¹ z atrybutami<br>
<b>int</b>&nbsp;pthread_mutexattr_destroy(<b>pthread_mutexattr_t</b>&nbsp;*attr)
- zwalnianie<br>
<b>int</b>&nbsp;pthread_mutexattr_settype(<b>pthread_mutexattr_t</b>&nbsp;*attr,
int type) - ustawia typ mutexu<br>
<b>int</b>&nbsp;pthread_mutexattr_gettype(<b>const pthread_mutexattr_t</b>&nbsp;*attr,
int *type) - pobiera typ mutexu<br>
<br>
</span></p>

<ul type=disc>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><b><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>pthread_mutexattr_t
     attr</span></b><span lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;-
     zmienna przechowuj¹ca atrybuty mutexa</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><b><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>type</span></b><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;-
     typ mutexu - mo¿e przyjmowaæ nastêpuj¹ce wartoœci:</span></li>
</ul>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>PTHREAD_MUTEX_NORMAL<br>
PTHREAD_MUTEX_ERRORCHECK<br>
PTHREAD_MUTEX_RECURSIVE</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:13.5pt;font-family:"inherit",serif;color:#373A3C'>Wspó³dzielenie
mutexu z innymi procesami</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:12.0pt;font-family:"inherit",serif;color:#373A3C'>Funkcje</span></p>

<ul type=disc>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:10.0pt;font-family:"Courier New"'>int
     pthread_mutexattr_setpshared(pthread_mutexattr_t *attr, int pshared)&nbsp;</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:10.0pt;font-family:"Courier New"'>int
     pthread_mutexattr_getpshared(const pthread_mutexattr_t *attr, int
     *pshared)&nbsp;</span></li>
</ul>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:13.5pt;font-family:"inherit",serif;color:#373A3C'>Zmiana
priorytetu w¹tku posiadaj¹cego blokadê</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Dostêpne,
gdy istnieje rozszerzenie&nbsp;</span><span style='font-size:11.5pt;font-family:
"Segoe UI",sans-serif;color:#373A3C'><a
href="https://pl.wikibooks.org/wiki/POSIX_Threads/Wst%C4%99p#Opcje_standardu"
title="POSIX Threads/Wstêp"><span lang=PL style='color:#009C58'>TPP</span></a></span><span
lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>&nbsp;(oraz&nbsp;</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'><a
href="https://pl.wikibooks.org/wiki/POSIX_Threads/Wst%C4%99p#Opcje_standardu"
title="POSIX Threads/Wstêp"><span lang=PL style='color:#009C58'>TPI</span></a></span><span
lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>).</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Wartoœæ
atrybutu decyduje o strategii wykonywania programu, gdy wiele w¹tków o ró¿nych
priorytetach stara siê o uzyskanie blokady. </span><span style='font-size:11.5pt;
font-family:"Segoe UI",sans-serif;color:#373A3C'>Atrybut mo¿e mieæ wartoœci:</span></p>

<ol start=1 type=1>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:10.0pt;font-family:"Courier New"'>PTHREAD_PRIO_NONE</span><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>,</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:10.0pt;font-family:"Courier New"'>PTHREAD_PRIO_PROTECT</span><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>,</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:10.0pt;font-family:"Courier New"'>PTHREAD_PRIO_INHERIT</span><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;(opcja&nbsp;<a
     href="https://pl.wikibooks.org/wiki/POSIX_Threads/Wst%C4%99p#Opcje_standardu"
     title="POSIX Threads/Wstêp"><span style='color:#009C58'>TPI</span></a>).</span></li>
</ol>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>W
przypadku&nbsp;</span><b><span lang=PL style='font-size:10.0pt;font-family:
"Courier New";color:#373A3C'>PTHREAD_PRIO_NONE</span></b><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>&nbsp;priorytet
w¹tku, który pozyskuje blokadê nie zmienia siê.</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>W
dwóch pozosta³ych przypadkach z mutexem powi¹zany zostaje pewien priorytet i
gdy w¹tek uzyska blokadê, wówczas jego priorytet jest podbijany do wartoœæ z
mutexu (o ile oczywiœcie by³ wczeœniej ni¿szy). Innymi s³owy w obrêbie sekcji
krytycznej w¹tek mo¿e dzia³aæ z wy¿szym priorytetem.</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Sposób
ustalania priorytetu mutexu zale¿y od atrybutu:</span></p>

<ul type=disc>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     lang=PL style='font-size:10.0pt;font-family:"Courier New"'>PTHREAD_PRIO_INHERIT</span><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;-
     wybierany jest maksymalny priorytet spoœród w¹tków oczekuj¹cych na
     uzyskanie danej blokady;</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     lang=PL style='font-size:10.0pt;font-family:"Courier New"'>PTHREAD_PRIO_PROTECT</span><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;-
     priorytet jest ustalany przez programistê funkcj¹&nbsp;</span><span
     lang=PL style='font-size:10.0pt;font-family:"Courier New"'>pthread_mutexattr_setprioceiling</span><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;lub&nbsp;</span><span
     lang=PL style='font-size:10.0pt;font-family:"Courier New"'>pthread_mutex_setprioceiling</span><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;(opisane
     w nastêpnej sekcji).</span></li>
</ul>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Dodatkowo
jeœli wybrano wartoœæ&nbsp;</span><span lang=PL style='font-size:10.0pt;
font-family:"Courier New";color:#373A3C'>PTHREAD_PRIO_PROTECT</span><span
lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>,
wówczas wszelkie próby za³o¿enia blokady funkcjami&nbsp;</span><span lang=PL
style='font-size:10.0pt;font-family:"Courier New";color:#373A3C'>pthread_mutex_XXXlock</span><span
lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>z
poziomu w¹tków o priorytecie ni¿szym ni¿ ustawiony dla mutexa nie powiod¹ siê -
zostanie zwrócona wartoœæ b³êdu&nbsp;</span><span lang=PL style='font-size:
10.0pt;font-family:"Courier New";color:#373A3C'>EINVAL</span><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>.</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:12.0pt;font-family:"inherit",serif;color:#373A3C'>Funkcje</span></p>

<ul type=disc>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:10.0pt;font-family:"Courier New"'>int
     pthread_mutexattr_setprotocol(pthread_mutexattr_t *attr, int protocol)
     &nbsp;(<i><a
     href="http://www.opengroup.org/onlinepubs/000095399/functions/pthread_mutexattr_setprotocol.html"><span
     style='color:#009C58'>doc</span></a></i>)</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:10.0pt;font-family:"Courier New"'>int
     pthread_mutexattr_getprotocol(const pthread_mutexattr_t *attr, int
     *protocol) &nbsp;(<i><a
     href="http://www.opengroup.org/onlinepubs/000095399/functions/pthread_mutexattr_getprotocol.html"><span
     style='color:#009C58'>doc</span></a></i>)</span></li>
</ul>

<p class=MsoNormal style='line-height:normal;background:white'><span
style='font-size:18.0pt;font-family:"inherit",serif;color:#373A3C'>Semafory
nienazwane</span></p>

<ul type=disc>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>Nowy
     semafor jest tworzony przez funkcjê&nbsp;</span><span style='font-size:
     11.5pt;font-family:"Segoe UI",sans-serif'><a
     href="http://www.linuxmanpages.com/man3/sem_init.3thr.php"><span lang=PL
     style='color:#009C58'>sem_init</span></a></span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>Operacja&nbsp;Sygnalizuj&nbsp;jest
     wykonywana za pomoc¹&nbsp;</span><span style='font-size:11.5pt;font-family:
     "Segoe UI",sans-serif'><a
     href="http://www.linuxmanpages.com/man3/sem_post.3thr.php"><span lang=PL
     style='color:#009C58'>sem_post</span></a></span><span lang=PL
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>, która
     zwiêksza licznik semafora. </span><span style='font-size:11.5pt;
     font-family:"Segoe UI",sans-serif'>Funkcja ta nigdy nie powoduje blokady
     wywo³uj¹cego j¹ w¹tku.</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>Operacja&nbsp;Czekaj&nbsp;jest
     wykonywana za pomoc¹ jednej z nastêpuj¹cych funkcji:</span></li>
 <ul type=circle>
  <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
      style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'><a
      href="http://www.linuxmanpages.com/man3/sem_wait.3thr.php"><span lang=PL
      style='color:#009C58'>sem_wait</span></a></span><span lang=PL
      style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;- proces
      jest usypiany a¿ dany semafor ma nie-zerow¹ wartoœæ, po czym nastêpuje
      atomowa operacja zmniejszenia licznika semafora</span></li>
  <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
      style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'><a
      href="http://www.linuxmanpages.com/man3/sem_trywait.3thr.php"><span
      lang=PL style='color:#009C58'>sem_trywait</span></a></span><span lang=PL
      style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>&nbsp;- jest
      nie blokuj¹cym wariantem&nbsp;sem_wait&nbsp;- jeœli semafor ma zerowy
      licznik, funkcja nie usypia w¹tku lecz zwraca -1 u stawia numer b³êdu
      na&nbsp;EAGAIN</span></li>
 </ul>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>Semafor
     jest usuwany za pomoc¹&nbsp;</span><span style='font-size:11.5pt;
     font-family:"Segoe UI",sans-serif'><a
     href="http://www.linuxmanpages.com/man3/sem_destroy.3thr.php"><span
     lang=PL style='color:#009C58'>sem_destroy</span></a></span></li>
</ul>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:18.0pt;font-family:"inherit",serif;color:#373A3C'>Warunki
Sprawdzaj¹ce (Condition Variables)</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Czasami
konieczne jest monitorowanie przez w¹tek pewnych warunków. Implementacja ich
sprawdzania z wykorzystaniem konwencjonalnych mechanizmów (ci¹g³ego sprawdzania
czy warunek jest spe³niony) by³aby mocno nieefektywna, gdy¿ powodowa³aby ¿e
w¹tek by³by ci¹gle zajêty.</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Rozwi¹zaniem
tego problemu jest mechanizm warunków sprawdzaj¹cych (</span><span
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'><a
href="http://www.linuxmanpages.com/man3/pthread_cond_init.3thr.php"><span
lang=PL style='color:#009C58'>Condition Variables</span></a></span><span
lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>).
Pozwala on na uœpienie w¹tku a¿ do momentu gdy pewne warunki na dzielonych
danych zostan¹ spe³nione.</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Za
pomoc¹ zmiennych warunkowych mo¿emy wstrzymywaæ wykonywanie w¹tku, a¿ do
momentu gdy zajdzie okreœlony przez nas warunek. Zmiennej warunkowej towarzyszy
mutex, który zapewnia wy³¹cznoœæ w trakcie odczytu/zmiany wartoœci flagi.<br>
<br>
Gdy w¹tek dochodzi do sekcji zale¿nej od pewnego warunku (np. flagi),
wykonywana jest sekwencja:</span></p>

<ul type=disc>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>W¹tek
     zajmuje mutexa nastêpnie sprawdza warunek.</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>Je¿eli
     warunek jest spe³niony – wtedy w¹tek wykonuje kolejne instrukcje.</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>Jeœli
     warunek nie jest spe³niony – wtedy w¹tek jednoczeœnie odblokowuje mutex i
     wstrzymuje dzia³anie a¿ do spe³nienia warunku (poinformowania o zmianie
     warunku przez inny watek).</span></li>
</ul>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Przy
zmianie warunku musz¹ byæ podjête nastêpuj¹ce kroki:</span></p>

<ul type=disc>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>Zajêcie mutexa
     towarzysz¹cego zmiennej warunkowej</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>Podjêcie
     akcji, która mo¿e zmieniæ warunek</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     lang=PL style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>Zasygnalizowanie
     oczekuj¹cym w¹tkom zmiany warunku.</span></li>
 <li class=MsoNormal style='color:#373A3C;line-height:normal;background:white'><span
     style='font-size:11.5pt;font-family:"Segoe UI",sans-serif'>Odblokowanie
     mutexa.</span></li>
</ul>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Zmienne
warunkowe przechowywane s¹ w typie pthread_cond_t.<br>
Zmienne warunkowe obs³uguj¹ nastêpuj¹ce funkcje:</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;background:white'><b><span lang=PL style='font-size:11.5pt;font-family:
"Segoe UI",sans-serif;color:#373A3C'>int</span></b><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>&nbsp;pthread_cond_init(<b>pthread_cond_t</b>&nbsp;*cond,
pthread_condattr_t *attr) - inicjalizacja zmiennej<br>
<b>int</b>&nbsp;pthread_cond_destroy(<b>pthread_cond_t</b>&nbsp;*cond) -
usuniêcie zmiennej<br>
<b>int</b>&nbsp;pthread_cond_wait(<b>pthread_cond_t</b>&nbsp;*cond,
pthread_mutex_t *mutex) - ustawia w¹tek w tryb oczekiwania w czasie, którego
Mutex jest odblokowany<br>
<b>int</b>&nbsp;pthread_cond_timedwait(<b>pthread_cond_t</b>&nbsp;*cond,
pthread_mutex_t *mutex, const struct timespec *timeout) - usypia w¹tek na
okreœlon¹ iloœæ czasu<br>
<b>int&nbsp;</b>pthread_cond_broadcast(<b>pthread_cond_t</b>&nbsp;*cond) -
powiadamia wszystkie oczekuj¹ce w¹tki<br>
<b>int</b>&nbsp;pthread_cond_signal(<b>pthread_cond_t</b>&nbsp;*cond) -
powiadamia tylko jeden w¹tek</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'><br>
Zmienna warunkowa mo¿e byæ równie¿ inicjalizowana makrem&nbsp;<b>PTHREAD_COND_INITIALIZER</b>,
które zainicjalizuje j¹ standardowymi atrybutami.&nbsp;<br>
<br>
</span><span style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;
color:#373A3C'>Do obs³ugi atrybutów s³u¿a funkcje:&nbsp;<b>int</b>&nbsp;pthread_condattr_init(<b>pthread_condattr_t</b>&nbsp;*attr)
- inicjalizacja<br>
<b>int</b>&nbsp;pthread_condattr_destroy(<b>pthread_condattr_t</b>&nbsp;*attr)
- zwolnianie<br>
<b>int</b>&nbsp;pthread_condattr_getpshared(<b>const pthread_condattr_t</b>&nbsp;*attr,&nbsp;<b>int</b>&nbsp;*pshared)
- pobiera atrybut process-shared<br>
<b>int</b>&nbsp;pthread_condattr_setpshared(<b>pthread_condattr_t</b>&nbsp;*attr,&nbsp;<b>int</b>&nbsp;pshared)
- ustawia atrybut process-shared</span></p>

<p class=MsoNormal style='line-height:normal;background:white'><span lang=PL
style='font-size:11.5pt;font-family:"Segoe UI",sans-serif;color:#373A3C'>Poni¿ej
znajduje siê &quot;urywek&quot; kodu wykorzystuj¹cy warunki sprawdzaj¹ce. Dwie
zmienne dzielone (x&nbsp;i&nbsp;y) s¹ sprawdzana pod k¹tem wiêkszoœci&nbsp;x&nbsp;od&nbsp;y.
Ka¿da zmiana dowolnej ze zmiennych powoduje obudzenie
&quot;zainteresowanych&quot; w¹tków.</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=869
 style='width:651.75pt;border-collapse:collapse'>
 <tr>
  <td style='background:#7A5ADA;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal style='line-height:normal'><span style='font-size:12.0pt;
  font-family:"Times New Roman",serif'>Przyk³ad u¿ycia warunków sprawdzaj¹cych</span></p>
  </td>
 </tr>
 <tr>
  <td style='background:#DDDDFF;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>int
  x,y;</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>pthread_mutex_t
  mutex = PTHREAD_MUTEX_INITIALIZER;</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>pthread_cond_t
  cond   = PTHREAD_COND_INITIALIZER;</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>&nbsp;</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=PL style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>...</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=PL style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>&nbsp;</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=PL style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>&nbsp;</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=PL style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>// (Watek 1)</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=PL style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>// Czekanie a¿ x jest wiêksze od y jest </span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=PL style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>// przeprowadzane nastêpuj¹co:</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=PL style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>&nbsp;</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=PL style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>pthread_mutex_lock(&amp;mutex);</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>while
  (x &lt;= y) {</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>   
  pthread_cond_wait(&amp;cond, &amp;mutex);</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>}</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>&nbsp;</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>...</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>&nbsp;</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>pthread_mutex_unlock(&amp;mutex);</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>&nbsp;</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>...</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>&nbsp;</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>&nbsp;</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>//
  (Watek 2)</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=PL style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>// Kazda modyfikacja x lub y mo¿e</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=PL style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>// powodowaæ zmianê warunków. Nale¿y</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=PL style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>// obudziæ pozosta³e w¹tki, które korzystaj¹</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=PL style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>// z tego warunku sprawdzaj¹cego.</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=PL style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>&nbsp;</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=PL style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>pthread_mutex_lock(&amp;mutex);</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=PL style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>/* zmiana x oraz y */</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=PL style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>if (x &gt; y) </span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=PL style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>    </span><span style='font-size:10.0pt;font-family:Consolas;
  color:#212529'>pthread_cond_broadcast(&amp;cond);</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-size:10.0pt;font-family:Consolas;color:#212529'>pthread_mutex_unlock(&amp;mutex);</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

</div>

</body>

</html>
